(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5690:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});var i=r(5155);class s{u8(){let t=this._src.getUint8(this._pos);return this._pos+=1,t}i32(){let t=this._src.getInt32(this._pos,!0);return this._pos+=4,t}u32(){let t=this._src.getUint32(this._pos,!0);return this._pos+=4,t}f32(){let t=this._src.getFloat32(this._pos,!0);return this._pos+=4,t}v2i32(){return{x:this.i32(),y:this.i32()}}v2f32(){return{x:this.f32(),y:this.f32()}}v3f32(){let t=this.f32();return{x:t,y:this.f32(),z:this.f32()}}v4f32(){let t=this.f32(),e=this.f32();return{x:t,y:e,z:this.f32(),w:this.f32()}}bytes(t){if(t<0)throw"XXX";let e=this._src.buffer.slice(this._pos,this._pos+t);return this._pos+=t,e}string(){let t=this.i32();if(t<0)throw"XXX";let e=this.bytes(t);return this._utf8.decode(e)}nullable_string(){let t=this.i32();if(t<0)return null;let e=this.bytes(t);return this._utf8.decode(e)}fixed_len_string(t){let e=this.bytes(t);return this._utf8.decode(e)}tail(){return this._src.buffer.slice(this._src.byteOffset+this._pos)}skip(t){this._pos+=t}tell(){return this._pos}seek(t){this._pos=t}constructor(t,e=0,r){this._utf8=new TextDecoder,this._src=new DataView(t,e,r),this._pos=0}}var n=function(t){return t[t.UserDefined=0]="UserDefined",t[t.SByte=1]="SByte",t[t.Byte=2]="Byte",t[t.Boolean=3]="Boolean",t[t.Int16=4]="Int16",t[t.UInt16=5]="UInt16",t[t.Int32=6]="Int32",t[t.UInt32=7]="UInt32",t[t.Int64=8]="Int64",t[t.UInt64=9]="UInt64",t[t.Single=10]="Single",t[t.Double=11]="Double",t[t.String=12]="String",t[t.Enumeration=13]="Enumeration",t[t.Vector2I=14]="Vector2I",t[t.Vector2=15]="Vector2",t[t.Vector3=16]="Vector3",t[t.Array=17]="Array",t[t.Pair=18]="Pair",t[t.Dictionary=19]="Dictionary",t[t.List=20]="List",t[t.HashSet=21]="HashSet",t[t.Queue=22]="Queue",t[t.Color=23]="Color",t[t.IS_GENERIC_TYPE=128]="IS_GENERIC_TYPE",t[t.IS_VALUE_TYPE=64]="IS_VALUE_TYPE",t[t.VALUE_MASK=63]="VALUE_MASK",t}(n||{});class l{deser_cls(t,e){let r=e?this._rd.tell()+e:void 0,i={};for(let e of t.fields)i[e.name]=this.deser_tp(e.type);for(let e of t.props)i[e.name]=this.deser_tp(e.type);return void 0!==r&&this._rd.tell()<r&&(i[".extra"]=r-this._rd.tell(),this._rd.seek(r)),i}deser_tp(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t.kind){case"bool":return 1==this._rd.u8();case"enum":case"i32":return this._rd.i32();case"u32":return this._rd.u32();case"f32":return this._rd.f32();case"v2i32":return this._rd.v2i32();case"v2f32":return this._rd.v2f32();case"v3f32":return this._rd.v3f32();case"str":return this._rd.nullable_string();case"dict":{this._rd.i32();let e=this._rd.i32();if(e<0)return null;let r=[],i={};for(let i=0;i!=e;i++)r.push(this.deser_tp(t.value_tp));for(let s=0;s!=e;s++){let e=this.deser_tp(t.key_tp);"string"==typeof e&&(i[e]=r[s])}return i}case"set":{this._rd.i32();let e=this._rd.i32();if(e<0)return null;let r=new Set;for(let i=0;i!=e;i++)r.add(this.deser_tp(t.base_tp,!0));return r}case"list":case"array":{this._rd.i32();let e=this._rd.i32();if(e<0)return null;if("u8"===t.base_tp.kind)return this._rd.bytes(e);{let r=[];for(let i=0;i!=e;i++)r.push(this.deser_tp(t.base_tp,!0));return r}}case"class":{let e=this._rd.i32();if(e<0)return null;let r=this._types.get(t.name);if(void 0===r)return this._rd.skip(e),null;return this.deser_cls(r,e)}case"struct":{let r;e||(r=this._rd.i32());let i=this._types.get(t.name);if(void 0===i){if(void 0===r)throw"XXX";return this._rd.skip(r),null}return this.deser_cls(i,r)}case"pair":return this._rd.i32(),[this.deser_tp(t.first_tp),this.deser_tp(t.second_tp)];default:throw"XXX"}}deser_obj(){let t=this._rd.string(),e=this._types.get(t);if(!e)throw"XXX";return this.deser_cls(e)}constructor(t,e){this._rd=t,this._types=e}}async function o(t){let e=new s(t),r=function(t){let e=()=>{let r=t.u8(),i=i=>{let s=[];if(128&r){let r=t.u8();if(void 0!==i&&r!=i)throw"XXX";for(let t=0;t!=r;t++)s.push(e())}return s},s=()=>{if(128&r&&t.u8())throw"XXX"};switch(63&r){case 18:{let[t,e]=i(2);return{kind:"pair",first_tp:t,second_tp:e}}case 19:{let[t,e]=i(2);return{kind:"dict",key_tp:t,value_tp:e}}case 20:{let[t]=i(1);return{kind:"list",base_tp:t}}case 21:{let[t]=i(1);return{kind:"set",base_tp:t}}case 22:{let[t]=i(1);return{kind:"queue",base_tp:t}}case 13:{let e=t.string();return s(),{kind:"enum",name:e}}case 0:return{kind:64&r?"struct":"class",name:t.string(),args:i()};case 17:{let t=e();return s(),{kind:"array",base_tp:t}}case 1:return s(),{kind:"i8"};case 2:return s(),{kind:"u8"};case 3:return s(),{kind:"bool"};case 4:return s(),{kind:"i16"};case 5:return s(),{kind:"u16"};case 6:return s(),{kind:"i32"};case 7:return s(),{kind:"u32"};case 8:return s(),{kind:"i64"};case 9:return s(),{kind:"u64"};case 10:return s(),{kind:"f32"};case 11:return s(),{kind:"f64"};case 12:return s(),{kind:"str"};case 14:return s(),{kind:"v2i32"};case 15:return s(),{kind:"v2f32"};case 16:return s(),{kind:"v3f32"};case 23:return s(),{kind:"color"};default:throw"XXX"}},r=new Map,i=t.i32();for(let s=0;s!=i;s++){let i=t.string(),s=t.i32(),n=t.i32(),l=[],o=[];for(let r=0;r!=s;r++){let r=t.string(),i=e();l.push({name:r,type:i})}for(let r=0;r!=n;r++){let r=t.string(),i=e();o.push({name:r,type:i})}r.set(i,{name:i,fields:l,props:o})}return r}(e);return new l(e,r).deser_obj()}var a=r(2115);class u{next(){this._inext+=1,this._inext>=56&&(this._inext=1),this._inextp+=1,this._inextp>=56&&(this._inextp=1);let t=this._arr[this._inext]-this._arr[this._inextp];for(;t<-0x80000000;)t+=0x100000000;for(;t>0x7fffffff;)t-=0x100000000;return 0x7fffffff==t&&(t-=1),t<0&&(t+=0x7fffffff),this._arr[this._inext]=t,t}float(){return 4656612875245797e-25*this.next()}int(t,e){return Math.trunc(this.float()*(e-t)+t)}constructor(t){let e=0x9a4ec86-t,r=1,i=Array.from({length:56},()=>0);i[55]=e;for(let t=1;t<55;t++){let s=21*t%55;i[s]=r,(r=e-r)<0&&(r+=0x7fffffff),e=i[s]}for(let t=0;t<4;t++)for(let t=1;t<56;t++)i[t]-=i[1+(t+30)%55],i[t]<0&&(i[t]+=0x7fffffff);this._inext=0,this._inextp=21,this._arr=i}}let h=["BouldersLarge","BouldersMedium","BouldersMixed","BouldersSmall","DeepOil","FrozenCore","GeoActive","Geodes","GeoDormant","GlaciersLarge","MagmaVents","MetalPoor","MetalRich","MisalignedStart","SlimeSplats","expansion1::CrashedSatellites","expansion1::IrregularOil","expansion1::MetalCaves","expansion1::Volcanoes"],d=["steam","hot_steam","hot_water","slush_water","filthy_water","slush_salt_water","salt_water","small_volcano","big_volcano","liquid_co2","hot_co2","hot_hydrogen","hot_po2","slimy_po2","chlorine_gas","methane","molten_copper","molten_iron","molten_gold","molten_aluminum","molten_cobalt","oil_drip","liquid_sulfur"];function f(){return{seed:"",width:0,height:0,cells:[]}}async function c(t){let e=[],r=await o(await t.arrayBuffer());for(let t of r.worlds){let r=t.data.world.offset,i=t.data.gameSpawnData;for(let s of(e.push({size:{x:t.data.world.size.x,y:t.data.world.size.y},position:{x:r.x,y:r.y},color:"gray",text:t.name}),i.buildings))s.id.indexOf("quarters")>=0&&e.push({size:{x:10,y:10},position:{x:r.x+s.location_x,y:r.y+s.location_y},color:"green",text:s.id});for(let s of i.otherEntities)if(s.id.indexOf("Geyser")>=0){if("GeyserGeneric"==s.id){let e=new u(t.data.globalWorldSeed+Math.floor(s.location_x)+Math.floor(s.location_y)+7).int(0,d.length);s.id="GeyserGeneric_".concat(d[e])}e.push({size:{x:4,y:4},position:{x:r.x+s.location_x,y:r.y+s.location_y},color:"red",text:s.id.slice(14)})}}return{seed:r.worlds[0].data.globalWorldSeed,width:r.size.x,height:r.size.y,cells:e}}function _(t){let e=t.cells.map((e,r)=>(0,i.jsx)("div",{style:{position:"absolute",left:5*e.position.x,top:(t.height-e.position.y-e.size.y)*5,width:5*e.size.x,height:5*e.size.y,backgroundColor:e.color,textAlign:"center"},children:e.text},r));return(0,i.jsx)("div",{style:{width:5*t.width,height:5*t.height},children:e})}function p(){let[t,e]=(0,a.useState)(f),r=async t=>{for(let r of(t.preventDefault(),t.dataTransfer.items)){if("file"!=r.kind)continue;let t=r.getAsFile();t&&e(await c(t))}},[s,n]=(0,a.useState)(()=>[]),l=[];for(let t of s)l.push((0,i.jsx)("li",{children:t}));return(0,i.jsxs)("div",{onDrop:r,onDragOver:t=>{t.preventDefault()},children:[(0,i.jsx)("p",{children:(0,i.jsx)("button",{onClick:()=>{for(let t=-100;t<100;t++){let e=new u(0x1a834ee7+t).int(0,d.length);"molten_aluminum"==d[e]&&console.log(t)}},children:"xxx"})}),(0,i.jsx)("p",{children:(0,i.jsx)("button",{onClick:()=>{let t=t=>{for(let e of["GeoActive","MetalRich","expansion1::IrregularOil"])if(!t.includes(e))return!1;for(let e of["BouldersLarge","BouldersMedium","BouldersMixed","BouldersSmall","GlaciersLarge","SlimeSplats","GeoDormant"])if(t.includes(e))return!1;return!0};for(;;){let e=Math.trunc(2e9*Math.random()),r=function(t){let e=new u(t),r=[],i=[...h],s=e.int(2,5);for(;r.length<s;){let t=e.int(0,i.length),s=i[t];r.push(s),i.splice(t,1)}return r}(e);if(t(r)){n([...s,"V-SFRZ-C-".concat(e,"-0-D3-UE2 ").concat(r)]);break}}},children:"Generate seed"})}),(0,i.jsx)("ul",{children:l}),(0,i.jsx)(_,{seed:t.seed,width:t.width,height:t.height,cells:t.cells})]})}},8351:(t,e,r)=>{Promise.resolve().then(r.bind(r,5690))}},t=>{var e=e=>t(t.s=e);t.O(0,[441,684,358],()=>e(8351)),_N_E=t.O()}]);